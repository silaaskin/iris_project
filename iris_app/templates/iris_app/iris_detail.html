{% extends 'iris_app/base.html' %}
{% load static %}

{% block title %}Iris Details - Management System{% endblock %}

{% block content %}

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h1>ğŸ“‹ Iris Sample Details</h1>
    {% if can_edit %}
        <div class="btn-group">
            <a href="{% url 'iris_update' plant.pk %}" class="btn btn-info">âœï¸ Edit</a>
            <a href="{% url 'iris_delete' plant.pk %}" class="btn btn-danger">ğŸ—‘ï¸ Delete</a>
        </div>
    {% endif %}
</div>

<div class="card">
    <div class="card-body">
        <div style="display: grid; grid-template-columns: 300px 1fr; gap: 30px; margin: 20px 0;">
            
            <!-- IMAGE -->
            <div style="text-align: center;">
                {% if plant.species == 'setosa' %}
                    <img src="{% static 'images/setosa.jpg' %}" alt="Iris Setosa - Small purple flower with short petals" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
                {% elif plant.species == 'versicolor' %}
                    <img src="{% static 'images/versicolor.jpg' %}" alt="Iris Versicolor - Medium purple flower with medium petals" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
                {% else %}
                    <img src="{% static 'images/virginica.jpg' %}" alt="Iris Virginica - Large purple flower with long petals" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
                {% endif %}
                <h3 style="margin-top: 1rem;">{{ plant.get_species_display }}</h3>
            </div>

            <!-- DETAILS -->
            <div>
                <!-- SPECIES INFO -->
                <div class="div-section">
                    <h3>ğŸŒ¿ Species Information</h3>
                    <table>
                        <tr>
                            <td style="font-weight: bold; width: 40%;">Species Name:</td>
                            <td>{{ plant.get_species_display }}</td>
                        </tr>
                        <tr>
                            <td style="font-weight: bold;">Species Code:</td>
                            <td><code>{{ plant.species }}</code></td>
                        </tr>
                    </table>
                </div>

                <!-- MEASUREMENTS -->
                <div class="div-section">
                    <h3>ğŸ“ Physical Measurements (cm)</h3>
                    <table>
                        <tr>
                            <td style="font-weight: bold; width: 40%;">Sepal Length:</td>
                            <td><strong>{{ plant.sepal_length }}</strong> cm</td>
                        </tr>
                        <tr>
                            <td style="font-weight: bold;">Sepal Width:</td>
                            <td><strong>{{ plant.sepal_width }}</strong> cm</td>
                        </tr>
                        <tr>
                            <td style="font-weight: bold;">Petal Length:</td>
                            <td><strong>{{ plant.petal_length }}</strong> cm</td>
                        </tr>
                        <tr>
                            <td style="font-weight: bold;">Petal Width:</td>
                            <td><strong>{{ plant.petal_width }}</strong> cm</td>
                        </tr>
                    </table>
                </div>

                <!-- LABORATORY INFO -->
                <div class="div-section">
                    <h3>ğŸ¢ Laboratory Information</h3>
                    {% if plant.lab %}
                        <table>
                            <tr>
                                <td style="font-weight: bold; width: 40%;">Laboratory:</td>
                                <td>{{ plant.lab.name }}</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">City:</td>
                                <td>{{ plant.lab.city }}</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">Phone:</td>
                                <td>{{ plant.lab.phone|default:"N/A" }}</td>
                            </tr>
                        </table>
                    {% else %}
                        <p style="color: #999;">Laboratory information not available.</p>
                    {% endif %}
                </div>

                <!-- SYSTEM INFO -->
                <div class="div-section">
                    <h3>âš™ï¸ System Information</h3>
                    <table>
                        <tr>
                            <td style="font-weight: bold; width: 40%;">Created By:</td>
                            <td>{{ plant.created_by.get_full_name|default:plant.created_by.username }}</td>
                        </tr>
                        <tr>
                            <td style="font-weight: bold;">Created:</td>
                            <td>{{ plant.created_at|date:"d/m/Y H:i" }}</td>
                        </tr>
                        <tr>
                            <td style="font-weight: bold;">Last Updated:</td>
                            <td>{{ plant.updated_at|date:"d/m/Y H:i" }}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="card-footer">
        <a href="{% url 'iris_list' %}" class="btn">â¬…ï¸ Back to List</a>
        {% if can_edit %}
            <div class="btn-group" style="margin: 0;">
                <a href="{% url 'iris_update' plant.pk %}" class="btn btn-info">âœï¸ Edit</a>
                <a href="{% url 'iris_delete' plant.pk %}" class="btn btn-danger">ğŸ—‘ï¸ Delete</a>
            </div>
        {% endif %}
    </div>
</div>

<!-- SIMILAR SAMPLES -->
<div class="div-section" style="margin-top: 30px;">
    <h2>ğŸ”„ Similar Iris Samples</h2>
    <p>To view other samples of {{ plant.get_species_display }}, you can use the <a href="{% url 'iris_search' %}?species={{ plant.species }}">search function</a> to filter by species.</p>
</div>

{% endblock %}