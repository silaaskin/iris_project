{% extends 'iris_app/base.html' %}
{% load static %}

{% block title %}Iris Ã–rnekleri - YÃ¶netim Sistemi{% endblock %}

{% block content %}

<h1>ğŸ“Š Iris Veri Listesi</h1>

<!-- ============= Ä°NFO DIV ============= -->
<div class="div-info">
    <h3>â„¹ï¸ Bilgiler</h3>
    <p>Bu proje <a href="https://archive.ics.uci.edu/ml/datasets/iris" target="_blank">UCI Iris Veri Seti</a>'ni kullanarak geliÅŸtirilmiÅŸtir. Toplam <strong>{{ total_count }}</strong> Iris Ã¶rneÄŸi bulunmaktadÄ±r.</p>
</div>

<!-- ============= Ä°ÅLEM BUTONLARI ============= -->
<div class="div-section">
    <h2>Ä°ÅŸlemler</h2>
    <div class="btn-group">
        <a href="{% url 'iris_create' %}" class="btn btn-success">â• Yeni Iris Ekle</a>
        <a href="{% url 'iris_search' %}" class="btn btn-info">ğŸ” DetaylÄ± Arama</a>
        <a href="{% url 'export_csv' %}" class="btn">â¬‡ï¸ CSV Ä°ndir</a>
        <a href="{% url 'import_csv' %}" class="btn btn-warning">â¬†ï¸ CSV YÃ¼kle</a>
        <a href="{% url 'iris_predict' %}" class="btn btn-danger">ğŸ¤– ML Tahmin</a>
    </div>
</div>

<!-- ============= TABLONUN ÃœSTÃœ DIV ============= -->
<div class="div-highlight">
    <h3>KayÄ±t Edilen Ã–rnekler</h3>
    <p>AÅŸaÄŸÄ±da tÃ¼m Iris Ã¶rnekleri gÃ¶sterilmektedir. Detay gÃ¶rmek, dÃ¼zenlemek veya silmek iÃ§in ilgili baÄŸlantÄ±ya tÄ±klayÄ±n.</p>
</div>

<!-- ============= TABLO ============= -->
{% if samples %}
    <table>
        <thead>
            <tr>
                <th>TÃ¼r</th>
                <th>Sepal (cm)</th>
                <th>Petal (cm)</th>
                <th>Laboratuvar</th>
                <th>Tarih</th>
                <th>Ä°ÅŸlemler</th>
            </tr>
        </thead>
        <tbody>
            {% for sample in samples %}
            <tr>
                <td><strong>{{ sample.get_species_display }}</strong></td>
                <td>
                    <ul style="margin: 0; list-style: none; padding: 0;">
                        <li>â†”ï¸ {{ sample.sepal_length }} cm</li>
                        <li>â†•ï¸ {{ sample.sepal_width }} cm</li>
                    </ul>
                </td>
                <td>
                    <ul style="margin: 0; list-style: none; padding: 0;">
                        <li>â†”ï¸ {{ sample.petal_length }} cm</li>
                        <li>â†•ï¸ {{ sample.petal_width }} cm</li>
                    </ul>
                </td>
                <td>{{ sample.lab.name|default:"N/A" }}</td>
                <td>{{ sample.created_at|date:"d/m/Y H:i" }}</td>
                <td>
                    <div class="table-actions">
                        <a href="{% url 'iris_detail' sample.pk %}" class="edit">Detay</a>
                        {% if sample.created_by == user or user.is_staff %}
                            <a href="{% url 'iris_update' sample.pk %}" class="edit">DÃ¼zenle</a>
                            <a href="{% url 'iris_delete' sample.pk %}" class="delete">Sil</a>
                        {% else %}
                            <span style="color: #999; font-size: 12px;">Yetkisiz</span>
                        {% endif %}
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <div class="div-danger">
        <h3>âš ï¸ Veri BulunamadÄ±</h3>
        <p>HenÃ¼z hiÃ§ Iris Ã¶rneÄŸi kaydedilmemiÅŸtir. <a href="{% url 'iris_create' %}">Yeni bir kayÄ±t eklemek</a> veya <a href="{% url 'import_csv' %}">CSV dosyasÄ± yÃ¼klemek</a> iÃ§in tÄ±klayÄ±n.</p>
    </div>
{% endif %}

<!-- ============= ALT DIV - Ä°STATÄ°STÄ°KLER ============= -->
<div class="div-section" style="margin-top: 30px;">
    <h2>ğŸ“ˆ Ä°statistikler</h2>
    <ul>
        <li><strong>Toplam Iris Ã–rneÄŸi:</strong> {{ total_count }}</li>
        <li><strong>KullanÄ±cÄ±larÄ±nÄ±zÄ±n KayÄ±tlarÄ±:</strong> {{ user.iris_plants.count }}</li>
        <li><strong>Disponible TÃ¼rler:</strong> 
            {% for species, display_name in species_types.items %}
                <span style="background: #ecf0f1; padding: 4px 8px; border-radius: 4px; margin: 2px;">{{ display_name }}</span>
            {% endfor %}
        </li>
    </ul>
</div>

<!-- ============= BAÅKA SAYFALARA LÄ°NKLER ============= -->
<div class="div-section">
    <h2>ğŸ”— HÄ±zlÄ± BaÄŸlantÄ±lar</h2>
    <ol>
        <li><a href="{% url 'iris_create' %}">Yeni Iris Ã–rneÄŸi Ekle</a></li>
        <li><a href="{% url 'iris_search' %}">Iris Ã–rneklerinde Arama Yap</a></li>
        <li><a href="{% url 'import_csv' %}">CSV DosyasÄ±ndan Ä°Ã§e Aktar</a></li>
        <li><a href="{% url 'iris_predict' %}">Makine Ã–ÄŸrenmesi ile Tahmin Yap</a></li>
        <li><a href="https://archive.ics.uci.edu/ml/datasets/iris" target="_blank">Orijinal UCI Dataset</a></li>
    </ol>
</div>

{% endblock %}